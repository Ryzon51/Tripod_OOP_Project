package gui;
import javax.swing.*;
import java.awt.event.*;
import dao.UserDAO;
import model.User;

public class LoginFrame extends JFrame {
    private JTextField userF = new JTextField(20);
    private JPasswordField passF = new JPasswordField(20);
    private JButton loginB = new JButton("Login");

    public LoginFrame() {
        setTitle("AgriTrack Login"); setSize(300, 200);
        setLayout(new java.awt.FlowLayout());
        add(new JLabel("User:")); add(userF);
        add(new JLabel("Pass:")); add(passF);
        add(loginB);
        loginB.addActionListener(e -> handleLogin()); // Action trigger
        setDefaultCloseOperation(EXIT_ON_CLOSE); setVisible(true);
    }

    private void handleLogin() {
        try {
            User u = new UserDAO().login(userF.getText(), new String(passF.getPassword()));
            if (u != null) { this.dispose(); new MainMenuFrame(u); } // Success
        } catch (Exception ex) { ex.printStackTrace(); }
    }
}